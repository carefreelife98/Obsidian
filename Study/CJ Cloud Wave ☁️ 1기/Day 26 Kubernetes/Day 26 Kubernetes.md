  

## [ì—°ìŠµë¬¸ì œ] Wordpress + MySQL êµ¬ì„±í•˜ê¸°

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_9.28.19.png]]

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.07.32.png]]

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.07.40.png]]

  

  

  

## Helm Chart

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.04.50.png]]

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.08.48.png]]

- Kubernetes ë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ìˆ˜ë§ì€ Yaml íŒŒì¼ì— ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ê³ , í•´ë‹¹ ë³€ìˆ˜ë“¤ì„ ì •ì˜ / ì„ ì–¸ / ì„¤ì • í•´ë†“ì€ ì°¨íŠ¸ì´ë‹¤.

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.08.56.png]]

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.33.17.png]]

- docker swarm / docker compose ì™€ ë¹„ìŠ·í•¨.
- helm ì€ cluster ê°€ ì•„ë‹Œ namespace ê¸°ì¤€ì´ë‹¤.

  

  

```
$ helm create (ì›í•˜ëŠ” ì°¨íŠ¸ ì´ë¦„)
```

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.12.09.png]]

  

  

## GIT ì‚¬ìš©í•˜ê¸°

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.23.30.png]]

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.23.50.png]]

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.26.26.png]]

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.26.54.png]]

  

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.13.51.png]]

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.22.01.png]]

  

  

  

## Istio ë€?

**Programmable, application-aware network**

- **IstioëŠ” ì„œë¹„ìŠ¤ ë©”ì‰¬**
    - ì„œë¹„ìŠ¤ ë©”ì‰¬ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— í•¨ê»˜ ì ìš© í•  ìˆ˜ ìˆëŠ” ì†Œí”„íŠ¸ì›¨ì–´.
    - **ì–´í”Œë¦¬ì¼€ì´ì…˜ íŠ¸ë˜í”½ì„ ì¸ì§€í•˜ê³  íŠ¸ë˜í”½ì„ Programmableí•˜ê²Œ ê´€ë¦¬ í•˜ëŠ” ë„êµ¬.**

  

- Envoy proxy = Istio

  

- Istioë¥¼ ì„¤ì¹˜í•˜ë©´ ë‚´ê°€ ì„œë¹„ìŠ¤ë¥¼ ë„ìš¸ë•Œ ë¬´ì¡°ê±´ ì»¨í…Œì´ë„ˆê°€ ì¶”ê°€ì ìœ¼ë¡œ í•˜ë‚˜ê°€ ë” ëœ¬ë‹¤.

  

- Labelì— Istio=enabled ë˜ì–´ìˆëŠ” Name Spaceë¥¼ ì°¾ì•„ ì»¨í…Œì´ë„ˆ(Side car)ë¥¼ í•˜ë‚˜ ë” ë„ì›Œ ì¤€ë‹¤.

  

## Istioì˜ ì¤‘ìš” ê¸°ëŠ¥

1. íŠ¸ë˜í”½ ê´€ë¦¬ (Programmable)
    - Circuit Breaker ê¸°ëŠ¥ë„ ìˆ˜í–‰ ê°€ëŠ¥.
2. ê´€ì°° ê¸°ëŠ¥
    - ìš°ë¦¬ê°€ ë„ìš´ ëª¨ë“  Podì˜ íŠ¸ë˜í”½ì„ ë³¼ ìˆ˜ ìˆë‹¤
        - ê° ì„œë¹„ìŠ¤ë“¤ì˜ ìƒí˜¸ ì˜ì¡´ì„±ì„ í•œ ëˆˆì— ë³¼ ìˆ˜ ìˆê²Œ ëœë‹¤.
3. ë³´ì•ˆê¸°ëŠ¥

  

## ë™ì‘ ì›ë¦¬

- yaml íŒŒì¼ì„ í•´ì„í•´ì„œ envoy ì„¤ì •ìœ¼ë¡œ ë°”ê¾¸ì–´ ì„¤ì •í•´ì¤€ë‹¤?
- ëª¨ë“  ì„œë¹„ìŠ¤ëŠ” Istioë¥¼ ê±°ì¹˜ê¸° ë•Œë¬¸ì— ì¤‘ìš”í•¨.
    - repo, ns ì „ë¶€ ë”°ë¡œ ë§Œë“¤ì–´ ê´€ë¦¬.

## Istio ì„¤ì¹˜

  

Istio ì˜ Plugin

Kiali

- prometheus
    - Metricì„ ë‹´ë‹¹
- Grafana
    - Visualization (Monitoring)
- Jeager
    - Trace (distributed)

  

  

## Istio ì‚¬ìš©í•˜ê¸°

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.24.37.png]]

```
$ curl
```

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.25.12.png]]

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.26.17.png]]

  

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.26.53.png]]

  

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.27.22.png]]

  

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.27.44.png]]

  

  

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.28.23.png]]

  

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.28.53.png]]

  

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.30.05.png]]

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.34.06.png]]

- Bookinfo

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.35.11.png]]

  

  

## Circuit Breaker

1. fortio ì™€ ì„œë¹„ìŠ¤ ì‚¬ì´ì˜ ë™ì‹œ ì ‘ì† ê±´ìˆ˜ê°€ ëª‡ê°œ ì´ìƒì´ ë˜ë©´ break(ì°¨ë‹¨).
    
      
    
      
    
      
    
      
    
2. ëŒ€ê¸° ì¤‘ì¸ í ê°œìˆ˜ê°€ ëª‡ê°œ ì´ìƒì´ë©´ break(ì°¨ë‹¨).
    
      
    
      
    
3. 500 ëŒ€ì˜ ì„œë²„ ì—ëŸ¬ ëª‡ë²ˆ ë°œìƒ ì‹œ break(ì°¨ë‹¨).

  

  

  

  

  

# CI / CD

  

CD

- Continuous Delivery
    - Trigger ê°€ í•„ìš”í•¨
- Continuous Deployment
    - ì™„ì „ ìë™

  

## CI (Jenkins, Tek-ton, Github, Git Lab)

ê°œë°œìë“¤ì´ ì†ŒìŠ¤ì½”ë“œ ê°œë°œ

ğŸ”½

push

ğŸ”½

Git

ğŸ”½

merge

ğŸ”½

### Pipeline

1. **Artifact**
    - ë§ì€ ê°œë°œìê°€ Pull Request í•˜ì—¬ í•©ì³ ë‚˜ì˜¨ ì‚°ì¶œë¬¼
2. image build
    
    - container ìƒì„±ë¨
    
    ğŸ”½
    
3. push
    
    ğŸ”½
    
4. img Registry ë“±ë¡

  

  

## CD (ArgoCD)

ArgoCD

- CI ì—ì„œ ì†ŒìŠ¤ê°€ ë°”ë€Œì–´ì„œ ë§¤ë²ˆ merge ë  ë•Œë§ˆë‹¤ ì„œë²„ê°€ ë‚´ë ¤ê°”ë‹¤ ì˜¬ë¼ê°€ë©° ë°˜ì˜í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì .
- ArgoCD ëŠ”
    
    Git Pipelineì´ ê°€ë™ ë  ë•Œë§ˆë‹¤ yaml íŒŒì¼ì˜ image: ë¶€ë¶„ ë²„ì „ì´ ë°”ë€Œì—ˆëŠ”ì§€ í™•ì¸í•˜ê³  ë°”ë€Œì—ˆìœ¼ë©´ í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ëŒì–´ì˜¨ í›„ ì„œë²„ì— ë°˜ì˜.
    
      
    
      
    
      
    
      
    

## app.js ì‚¬ìš©í•˜ì—¬ CI / CD ì ìš©í•´ë³´ê¸°

  

1. ArgoCD ì„¤ì¹˜
    
    ![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.28.32.png]]
    
    ```
    $ brew install argocd
    ```
    

  

2. ArgoCD ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°

```
$ argocd admin initial-password -n argocd
```

- ìœ„ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ë¹„ë°€ë²ˆí˜¸ê°€ ë‚˜ì˜¤ëŠ”ë°, ë³µì‚¬í•´ë†“ì.

  

1. Port-Forwarding (Cloudì˜ ë¡œë“œë°¸ëŸ°ì„œê°€ ì—†ìœ¼ë¯€ë¡œ localì—ì„œ ë™ì‘ì‹œí‚¤ê¸°ìœ„í•´)
    
    ![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.42.53.png]]
    
      
    
2. ë¡œì»¬í˜¸ìŠ¤íŠ¸ì—ì„œ í™•ì¸í•´ë³´ì.
    
    ![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.49.21.png]]
    
      
    
3. git ì„¤ì •
    
    ![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.54.33.png]]
    
      
    
      
    
4. docker img registry ì— image push
    
    ![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-21_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.55.00.png]]