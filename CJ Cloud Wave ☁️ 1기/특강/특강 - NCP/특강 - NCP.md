# Situation

A 기업은 유명한 오프라인 신발 매장을 시작으로 크게 성장한 회사입니다. 이제 이 기업은 이익을 더욱 늘리기 위해 온라인 사업을 시작하려고 하며, 이를 위해 소규모 전자상거래 사이트를 구축할 계획입니다. 기업은 웹사이트 개발을 위해 시스템 엔지니어를 고용하고 외주 업체와 계약하였습니다. 그러나 퍼블릭 클 라우드 사용 경험이 부족하여 인프라 구축에 어려움을 겪고 있습니다. 웹 사이트가 오픈될 때 사용자들이 부하로 인한 불편함을 느끼지 않도록 하는 것이 궁극적인 목표입니다. 다음 A기업의 시스템 엔지니어가 먼저 제시한 아키텍처를 참고하여 요구 사항에 맞는 인프라를 설계하고 구축할 필요가 있습니다.

  

# Architecture

1. 사용자들은 Application Load Balancer의 DNS 주소와 연결된 도메인으로 접속하게 됩니다.
2. 웹 서버는 Application Load Balancer 아래에 가용 영역별로 나누어 생성 후 연결해두었습니다.
3. 웹 서버가 퍼블릭 서브넷에 있어서 외부에서 직접적으로 접근할 수 있는 부분에 대한 우려가 있습니다.
4. 웹 서버에서 DATACENTER에 있는 Payment Server로 OUTBOUND 통신이 가능해야합니다.
5. 데이터베이스 서버는 이중화 구성이 필요합니다.
    - MSSQL 사용시 MS CS 사용
    - 서드 파티 → 엠텍 사용
6. 데이터베이스 서버를 직접 관리하기에는 어려움을 느끼고 있어 관리 포인트를 줄일 방법을 고민하고 있습니다.
    - 파스 서버 사용 (관리형 데이터 베이스)
    - 자동적 이중화 → 5번 조건 자동 충족
7. 개발 외주 업체가 인프라 구조를 참고하기 위해 네트워크, 서버, 데이터베이스에 대한 보기 권한을 요청하여 네이버 클라우드 플랫폼 콘솔을 접속할 수 있도록 계정을 전달해주어야 합니다.
    - Root 계정 대신 Server Account 계정 연결하여 전달
8. 웹 서버에서 데이터베이스로 연결이 가능해야 합니다.
    - Http 통신
9. Bastion 서버에서 웹 서버로 SSH 접속이 가능해야 합니다.
    - SSH 통신
10. Application Load Balancer의 알고리즘은 Least Connection으로 설정이 필요하며 세션 고정이 필요합니다.

  

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.17.49.png]]

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.18.06.png]]

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.20.47.png]]

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.26.46.png]]

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.33.14.png]]

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.34.19.png]]

- Init Script
    - 서버 최초 생성시 작성해주어야 하는 코드 파일.
        
        ![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.37.26.png]]
        

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.47.03.png]]

  

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.47.43.png]]

- 외부에서 접속할 포트번호.

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.48.34.png]]

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.09.08.png]]

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.10.58.png]]

- % : 전체 접속 허용
    
    ![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.12.09.png]]
    

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.16.24.png]]

- DB server의 이중화

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.18.33.png]]

- AWS 의 IAM과 같은 역할

  

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.40.35.png]]

# 정답

![[%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-08-04_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.18.16.png]]